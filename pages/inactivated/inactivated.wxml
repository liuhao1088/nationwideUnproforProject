<wxs src="../../utils/util.wxs" module="utils" />
<authorize id="authorize" />
<view class="inactivatedContainer column justify-center align-center">
  <view class="header">
    <image style="border-radius: 20rpx;"
      src="https://img10.360buyimg.com/ddimg/jfs/t1/167164/7/2541/68543/60069d54Eb986aa9f/48309a85dcf797e1.png"
      mode="widthFix"></image>
    <view class="user-item column justify-center align-center">
      <view class="user-wrapper">
        <view class="user-wrap">
          <view class="img-item column justify-center align-center" >
            <image src="{{avatarUrl}}" style="border-radius: 50%;">
            </image>
            <view class="user-tag">{{activation?'未延保':'待激活'}}</view>
          </view>
          <view class="name-item">
            <text style="margin-left: 10rpx;">{{nickName}}</text>
          </view>
        </view>

        <view class="user-name">NO.{{card}}</view>
      </view>
    </view>

    <view class="user-butItem">
      <view class="user-tagItem">
        <view class="chinese-item">适用范围：中国大陆，非港澳台</view>
        <view class="english-item">Scope of application: Chinese mainland</view>
      </view>
      <view class="but" wx:if="{{isOwner}}">
        <button style="width: 100%;font-weight: 400;" bindtap="getMeal" data-target="meal">购买延保</button>
      </view>
    </view>

  </view>

  <view class="title-item">产品信息</view>

  <view class="menu-item">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">产品名称</view>
      </view>
      <view class="menu-msgItem">
        {{data.category_name}} 
      </view>
    </view>
  </view>
  <view class="menu-item">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">产品型号</view>
      </view>
      <view class="menu-msgItem">
        {{data.model_name}}
      </view>
    </view>
  </view>
  <view class="menu-item">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">序列号</view>
      </view>
      <view class="menu-msgItem">
        {{data.res_code}}
      </view>
    </view>
  </view>
  <view class="menu-item">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">保修时间</view>
      </view>
      <view class="menu-msgItem">
        {{utils.sub(data.res_code)}} - {{utils.next(data.res_code)}}
      </view>
    </view>
  </view>

  <view class="menu-item">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">购买门店</view>
      </view>
      <view class="menu-msgItem" wx:if="{{activation}}">
        {{shop}}
      </view>
      <view class="menu-msgItem" wx:else>
        <input type="text" value="{{shop}}" bindinput="inputShop" placeholder="请输入购入门店" />
      </view>
      <view class="menu-rightItem" style="display:none">
        <text class="iconfont icondingwei" style="color:  rgba(23, 100, 152);"></text>
      </view>
    </view>
  </view>

  <view class="menu-item">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">装车照片</view>
      </view>
      <view class="grid grid-square flex-sub" style="height:100%; padding-left: 60rpx;">
        <view class="solids" bindtap="ChooseImage" style="display:{{img.length === 0?'block':'none'}};">
          <text class="cuIcon-cameraadd" style="color: #8799a3;"></text>
        </view>
        <view class="solids" bindtap="ViewImage" style="display:{{img.length === 1?'block':'none'}};">
          <image wx:for="{{img}}" wx:key="id" src="{{item}}" />
          <view class="cu-tag bg-red" catchtap="DelImg" wx:if="{{activation==false}}" data-index="{{index}}">
            <text class="cuIcon-close" style="color:#f92643;"></text>
          </view>
        </view>
      </view>
    </view>
  </view>
  <view class="menu-item" bindtap="toChoose">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">安装车型</view>
      </view>
      <view class="menu-msgItem">{{brand==''?'请选择您的汽车车型':brand+' '+model}}</view>
      <view class="menu-rightItem" wx:if="{{activation==false&&brand==''}}">
        <text class="iconfont iconweibiaoti34"></text>
      </view>
    </view>
  </view>

  <view class="title-item" wx:if="{{isOwner}}">个人信息</view>

  <view class="menu-item" wx:if="{{isOwner}}">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">车主姓名</view>
      </view>
      <view class="menu-msgItem">
        <input type="text" value="{{name}}" bindinput="inputName" placeholder="请输入您的姓名" />
      </view>
    </view>
  </view>
  <view class="menu-item" wx:if="{{isOwner}}">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">联系电话</view>
      </view>
      <view class="menu-msgItem" hidden="{{modalName=='phoneModal'}}">
        <input type="text" value="{{phone}}" bindinput="inputPhone" bindtap="phoneModal"
          disabled="{{whetherEmpower=='yes'}}" focus="{{whetherEmpower=='no'}}" bindblur="changeEmpower" placeholder="请输入您的联系电话" />
      </view>

    </view>
  </view>
  <view class="menu-item" wx:if="{{isOwner}}">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">所在地区</view>
      </view>
      <view class="menu-msgItem">
        <picker mode="region" bindchange="bindRegionChange" value="{{area}}" style="color:{{area=='选择所在地区'?'gray':'black'}};">{{area}}</picker>
      </view>
      <view class="menu-rightItem" style="display:none">
        <text class="iconfont icondingwei" style="color:  rgba(23, 100, 152);"></text>
      </view>
    </view>
  </view>
  <view class="menu-item" bindtap="" wx:if="{{isOwner}}">
    <view class="menu-wrap">
      <view class="menu-leftItem">
        <view class="menu-tagItem">详细地址</view>
      </view>
      <view class="menu-msgItem">
        <input type="text" value="{{address}}" bindinput="inputAddress" placeholder="请输入上门维修地址" />
      </view>
    </view>
  </view>

  <view class="but-item  column justify-center align-center" style="padding-bottom: {{isIphoneX? '66rpx' : '20rpx'}};" wx:if="{{isOwner}}">
    <button style="width: 80%;line-height: 80rpx;" wx:if="{{activation}}" bindtap="modify">修改信息</button>
    <button style="width: 80%;line-height: 80rpx;" wx:else bindtap="activation">马上激活</button>
  </view>

  <!-- 延保套餐 -->
  <view class="cu-modal {{modalName=='meal'?'show':''}}" catchtouchmove="ture">
    <view class="cu-dialog">
      <view class="modal-titleItem column justify-center align-center">
        <view class="modal-titleWrap">
          <view>选择延保服务</view>
          <view class="modal-iconWrap">
            <text class="iconfont iconwenti" style="margin-left: 10rpx;" bindtap="toExplainRules"></text>
          </view>
        </view>

      </view>

      <view class="modal-main">
        <view class="modal-menuItem  column justify-center align-center {{item.flag?'menuWrap-class' : ''}}"
          wx:for="{{serviceList}}" wx:key="id" bindtap="select" data-index="{{index}}">

          <view class="modal-menuWrap">
            <view class="modal-iconItem">
              <text class="iconfont {{item.flag?item.selectedIcon : item.icon}}" style="font-size: 72rpx;"></text>
            </view>

            <view class="modal-title">{{item.title}}</view>
            <view class="modal-price">{{item.price}}元</view>
            <view class="modal-tag {{item.flag?'tag-class' : ''}}">{{item.tag}}</view>
            <view class="modal-tag {{item.flag?'tag-class' : ''}}">专属卡面、头像框</view>
            <view class="modal-tag {{item.flag?'tag-class' : ''}}">专属客户服务</view>
            
          </view>

        </view>

      </view>

      <view class="modal-butItem">
        <view class="modal-but">
          <button style="width: 100%;" bindtap="hideModal">取消</button>
        </view>
        <view class="modal-but" style="border-left: 2rpx solid #ECECED;">
          <button style="width: 100%;color: rgb(23, 100, 152);" bindtap="payfee">去付款</button>
        </view>
      </view>
    </view>
  </view>



<view class="cu-modal {{modalName=='phoneModal'?'show':''}}" style="z-index:{{z}}" catchtouchmove="ture">
  <view class="cu-dialog">
    <view class="cu-bar bg-white justify-end">
      <view class="content">获取手机号</view>
      <view class="action" bindtap="hideModal">
        <text class="cuIcon-close" style="color:#f92643;"></text>
      </view>
    </view>
    <view class="padding-xl">
      <button class='btn1 justify-center' wx:if="{{whetherEmpower=='yes'}}" open-type="getPhoneNumber"
        bindgetphonenumber="getPhoneNumber" lang="zh_CN" style="width:80%;">
        <image class='btnImg' src='../../images/weixin.png'></image>
        <view>微信授权手机号</view>
      </button>
      <view style="color:gray;margin-top:10px;">或者</view>
      <view style="color:gray;margin-top:10px;" wx:if="{{whetherEmpower=='yes'}}" bindtap="changeInput">手动填写</view>
    </view>

  </view>
</view>


<view class="cu-modal {{modalName=='brandConfirm'?'show':''}}" style="z-index:{{z}}" catchtouchmove="ture">
  <view class="cu-dialog">
    <view class="cu-bar bg-white justify-end">
      <view class="content">品牌信息</view>
      <view class="action" bindtap="hideModal">
        <text class="cuIcon-close" style="color:#f92643;"></text>
      </view>
    </view>
    <view class="padding-xl">
      <view class="row align-center" style="margin-bottom:7px;height:20px;">
        <view style="font-weight:700;">品牌</view><input style="width:80%;margin:0px 10px;" value="{{brand}}"
          bindinput="inputBrand" placeholder="请输入品牌" />
      </view>
      <view class="row align-center" style="margin-bottom:7px;height:20px;">
        <view style="font-weight:700;">车型</view><input style="width:80%;margin:0px 10px;" value="{{model}}"
          bindinput="inputModel" placeholder="请输入车型" />
      </view>
    </view>
    <view class="cu-bar bg-white justify-end">
      <view class="action" style="color: #fff;">
        <button class="cu-btn margin-left" style="width:180rpx;background-color:#0178C1;color:white;" bindtap="hideModal">确定</button>

      </view>
    </view>
  </view>
</view>

















</view>